syntax = "proto3";

import "location_proof.proto";

package location_storage;

service LocationStorage {
    rpc SubmitLocationReport (SubmitLocationReportRequest) returns (SubmitLocationReportResponse) {}
    rpc ObtainLocationReport (ObtainLocationReportRequest) returns (ObtainLocationReportResponse) {}
}

message Report {
    repeated location_proof.Proof proofs = 1;
    repeated uint64 idx_ass = 2;
}

message SubmitLocationReportRequest {
    Report report = 1;
    uint64 idx = 2;
    uint64 pos_x = 3;
    uint64 pos_y = 4;
    uint64 epoch = 5;
}

/*message SubmitLocationReportRequest { //report is encrypted with idx
    repeated uint8 report = 1;
}*/

message SubmitLocationReportResponse {}

message ObtainLocationReportRequest {
    uint64 idx = 1;
    uint64 epoch = 2;
}

message ObtainLocationReportResponse {
    uint64 pos_x = 1;
    uint64 pos_y = 2;
}